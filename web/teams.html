<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„ÉÅ„Éº„É†„ÉªÈÅ∏Êâã‰∏ÄË¶ß | 2026Âπ¥ÂçÉËëâÁúåÈÉµ‰æøÂ±ÄÈï∑„ÇΩ„Éï„Éà„Éú„Éº„É´Â§ß‰ºö</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        /* „Çπ„É†„Éº„Ç∫„Çπ„ÇØ„É≠„Éº„É´ */
        html {
            scroll-behavior: smooth;
            scroll-padding-top: 180px;
        }
        
        /* „Éò„ÉÉ„ÉÄ„Éº */
        header {
            background: #003366;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header-top {
            background: #002244;
            padding: 12px 0;
            font-size: 0.85em;
        }
        
        .header-top-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-logo {
            cursor: pointer;
            transition: opacity 0.3s;
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
        }
        
        .header-logo:hover {
            opacity: 0.8;
        }
        
        .header-logo img {
            height: 35px;
            width: auto;
            display: block;
        }
        
        .header-info {
            color: #aaa;
            font-size: 0.9em;
        }
        
        .header-main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px 20px;
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding-bottom: 5px;
        }
        
        .nav-links::-webkit-scrollbar {
            display: none;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-size: 0.95em;
            transition: opacity 0.3s;
            white-space: nowrap;
        }
        
        .nav-links a:hover {
            opacity: 0.7;
        }
        
        .scroll-indicator {
            display: none;
        }
        
        /* „Éö„Éº„Ç∏„Éò„ÉÉ„ÉÄ„Éº */
        .page-header {
            background: white;
            border-bottom: 3px solid #003366;
            padding: 40px 20px;
        }
        
        .page-header-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .page-title {
            font-size: 2.2em;
            font-weight: 300;
            color: #003366;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        
        .page-subtitle {
            color: #666;
            font-size: 1.1em;
        }
        
        /* „Ç≥„É≥„ÉÜ„É≥„ÉÑ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        /* „Ç∏„É£„É≥„Éó„É™„É≥„ÇØ */
        .jump-links {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .jump-links-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #003366;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #003366;
        }
        
        .jump-links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }
        
        .jump-link {
            display: block;
            padding: 12px 15px;
            background: #f8f8f8;
            color: #003366;
            text-decoration: none;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
            transition: all 0.3s;
            font-weight: 500;
            text-align: center;
        }
        
        .jump-link:hover {
            background: #003366;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,51,102,0.2);
        }
        
        /* „ÉÅ„Éº„É†„Ç´„Éº„Éâ */
        .team-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .team-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px solid #003366;
        }
        
        .team-icon {
            width: 70px;
            height: 70px;
            background: #003366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: white;
            flex-shrink: 0;
        }
        
        .team-info {
            flex: 1;
        }
        
        .team-name {
            font-size: 1.8em;
            font-weight: bold;
            color: #003366;
            margin-bottom: 5px;
        }
        
        .team-player-count {
            color: #666;
            font-size: 0.95em;
        }
        
        /* ÈÅ∏Êâã„Ç∞„É™„ÉÉ„Éâ */
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
        }
        
        .player {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            display: flex;
            gap: 15px;
            align-items: center;
            transition: all 0.3s;
        }
        
        .player:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .player-photo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            background: #e0e0e0;
            flex-shrink: 0;
            border: 2px solid #ddd;
        }
        
        .player-photo.no-photo {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: #999;
            background: #e0e0e0;
        }
        
        .player-info {
            flex: 1;
            min-width: 0;
        }
        
        .player-number {
            font-weight: bold;
            color: #003366;
            font-size: 0.9em;
            margin-bottom: 4px;
        }
        
        .player-name {
            color: #333;
            font-size: 1.05em;
            font-weight: 600;
            margin-bottom: 3px;
        }
        
        .player-position {
            color: #666;
            font-size: 0.85em;
        }
        
        .player-note {
            color: #d32f2f;
            font-size: 0.8em;
            font-weight: bold;
            margin-top: 4px;
        }
        
        /* „É≠„Éº„Éá„Ç£„É≥„Ç∞ */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f0f0f0;
            border-top: 4px solid #003366;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .no-teams {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        
        .no-teams h2 {
            color: #003366;
            margin-bottom: 10px;
        }
        
        /* „Éï„ÉÉ„Çø„Éº */
        footer {
            background: #002244;
            color: white;
            padding: 20px;
            margin-top: 60px;
            text-align: center;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .copyright {
            font-size: 0.85em;
            opacity: 0.6;
        }
        
        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            .header-main {
                position: relative;
                overflow: hidden;
            }
            
            .nav-links {
                width: 100%;
                justify-content: flex-start;
                padding-bottom: 5px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                flex-wrap: nowrap;
            }
            
            .nav-links a {
                flex-shrink: 0;
            }
            
            .scroll-indicator {
                display: flex;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                height: 47px;
                width: 30px;
                align-items: center;
                justify-content: center;
                font-size: 1.2em;
                color: white;
                background-color: #003366;
                cursor: pointer;
                z-index: 10;
            }
            
            html {
                scroll-padding-top: 140px;
            }
            
            .page-title {
                font-size: 1.6em;
            }
            
            .container {
                padding: 20px 15px;
            }
            
            .team-card {
                padding: 20px;
            }
            
            .team-icon {
                width: 50px;
                height: 50px;
                font-size: 1.5em;
            }
            
            .team-name {
                font-size: 1.4em;
            }
            
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .jump-links-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-top">
            <div class="header-top-content">
                <a href="#" onclick="goBack(); return false;" class="header-logo">
                    <img src="https://drive.google.com/thumbnail?id=1i01jLSCnme9KdDuBwL8MufLNGdeo_d0x" alt="ÂÖ®ÂõΩÈÉµ‰æøÂ±ÄÈï∑‰ºö">
                </a>
                <div class="header-info">
                    2026Âπ¥ÂçÉËëâÁúåÈÉµ‰æøÂ±ÄÈï∑„ÇΩ„Éï„Éà„Éú„Éº„É´Â§ß‰ºö | 2026.6.6
                </div>
            </div>
        </div>
        <div class="header-main">
            <nav class="nav-links" id="navLinks">
                <a href="scoreboard.html" class="dynamic-link">Ë©¶ÂêàÈÄüÂ†± / Ë©¶ÂêàÁµêÊûú</a>
                <a href="gallery.html" class="dynamic-link">ÂÜôÁúü„ÇÆ„É£„É©„É™„Éº</a>
                <a href="schedule.html" class="dynamic-link">Â§ß‰ºö„Çπ„Ç±„Ç∏„É•„Éº„É´</a>
                <a href="tournament.html" class="dynamic-link">„Éà„Éº„Éä„É°„É≥„ÉàË°®</a>
                <a href="teams.html" class="dynamic-link">„ÉÅ„Éº„É†„ÉªÈÅ∏Êâã‰∏ÄË¶ß</a>
                <a href="venue.html" class="dynamic-link">‰ºöÂ†¥Ê°àÂÜÖ„Éª„Ç¢„ÇØ„Çª„Çπ</a>
                <a href="rules.html" class="dynamic-link">Â§ß‰ºö„É´„Éº„É´„ÉªË¶èÁ¥Ñ</a>
                <a href="history.html" class="dynamic-link">ÂÑ™ÂãùË®òÈå≤„ÉªÊ≠¥Âè≤</a>
            </nav>
            <div class="scroll-indicator" id="scrollIndicator">‚ñ∂Ô∏é</div>
        </div>
    </header>
    
    <div class="page-header">
        <div class="page-header-content">
            <h1 class="page-title">„ÉÅ„Éº„É†„ÉªÈÅ∏Êâã‰∏ÄË¶ß</h1>
            <p class="page-subtitle">Teams & Players</p>
        </div>
    </div>
    
    <div class="container" id="container">
        <div class="loading">
            <div class="loading-spinner"></div>
            <div>„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åæ„Åô...</div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="copyright">
                ¬© 2026 ÂçÉËëâÁúåÂç∞ÊóõÂú∞Âå∫ÈÉµ‰æøÂ±ÄÈï∑‰ºö
            </div>
        </div>
    </footer>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        
        if (urlParams.get('staff_api')) {
            localStorage.setItem('STAFF_BOT_API_URL', urlParams.get('staff_api'));
        }
        if (urlParams.get('audience_api')) {
            localStorage.setItem('AUDIENCE_BOT_API_URL', urlParams.get('audience_api'));
        }
        if (urlParams.get('api')) {
            localStorage.setItem('STAFF_BOT_API_URL', urlParams.get('api'));
        }
        
        const API_URL = localStorage.getItem('STAFF_BOT_API_URL') || '';
        
        const teamIcons = ['‚öæ', 'ü•é', '‚≠ê', 'üèÜ', 'üéØ', 'üî•', '‚ö°', 'üí™', 'üé™'];
        
        async function fetchTeams() {
            if (!API_URL) {
                document.getElementById('container').innerHTML = `
                    <div class="no-teams">
                        <h2>‚ö†Ô∏è API URL„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì</h2>
                        <p>„Éà„ÉÉ„Éó„Éö„Éº„Ç∏„Åã„ÇâÂÜçÂ∫¶„Ç¢„ÇØ„Çª„Çπ„Åô„Çã„Åã„ÄÅURL„Å´ ?api=... „ÇíÂê´„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                    </div>
                `;
                return;
            }
            
            try {
                const timestamp = new Date().getTime();
                const response = await fetch(`${API_URL}?type=teams&t=${timestamp}`, {
                    method: 'GET',
                    mode: 'cors',
                    cache: 'no-cache'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                displayTeams(data);
                
            } catch (error) {
                console.error('„Éá„Éº„ÇøÂèñÂæó„Ç®„É©„Éº:', error);
                document.getElementById('container').innerHTML = `
                    <div class="no-teams">
                        <h2>„Éá„Éº„Çø„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü</h2>
                        <p>„Ç®„É©„Éº: ${error.message}</p>
                        <p style="font-size:0.9em;color:#666;margin-top:10px;">„Éñ„É©„Ç¶„Ç∂„ÅÆ„Ç≥„É≥„ÇΩ„Éº„É´„ÅßË©≥Á¥∞„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                    </div>
                `;
            }
        }
        
        function displayTeams(data) {
            const container = document.getElementById('container');
            
            if (!data.teams || data.teams.length === 0) {
                container.innerHTML = `
                    <div class="no-teams">
                        <h2>„ÉÅ„Éº„É†„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</h2>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            // „Ç∏„É£„É≥„Éó„É™„É≥„ÇØ‰ΩúÊàê
            html += `
                <div class="jump-links">
                    <div class="jump-links-title">üìã „ÉÅ„Éº„É†‰∏ÄË¶ß (${data.teams.length}„ÉÅ„Éº„É†)</div>
                    <div class="jump-links-grid">
            `;
            
            data.teams.forEach((team, index) => {
                const teamId = `team-${index}`;
                html += `<a href="#${teamId}" class="jump-link">${team.name}</a>`;
            });
            
            html += `
                    </div>
                </div>
            `;
            
            // „ÉÅ„Éº„É†„Ç´„Éº„Éâ‰ΩúÊàê
            data.teams.forEach((team, index) => {
                const icon = teamIcons[index % teamIcons.length];
                const teamId = `team-${index}`;
                const playerCount = team.players.length;
                
                html += `
                    <div class="team-card" id="${teamId}">
                        <div class="team-header">
                            <div class="team-icon">${icon}</div>
                            <div class="team-info">
                                <div class="team-name">${team.name}</div>
                                <div class="team-player-count">${playerCount}Âêç</div>
                            </div>
                        </div>
                        
                        <div class="players-grid">
                `;
                
                team.players.forEach(player => {
                    const photoHtml = player.photo 
                        ? `<img src="${player.photo}" alt="${player.name}" class="player-photo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                           <div class="player-photo no-photo" style="display:none;">üë§</div>`
                        : `<div class="player-photo no-photo">üë§</div>`;
                    
                    html += `
                        <div class="player">
                            ${photoHtml}
                            <div class="player-info">
                                <div class="player-number">#${player.number}</div>
                                <div class="player-name">${player.name}</div>
                                <div class="player-position">${player.position}</div>
                                ${player.note ? `<div class="player-note">${player.note}</div>` : ''}
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function goBack() {
            const params = new URLSearchParams();
            if (API_URL) params.set('api', API_URL);
            window.location.href = `index.html?${params.toString()}`;
        }
        
        // „Çπ„ÇØ„É≠„Éº„É´„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº
        const navLinks = document.getElementById('navLinks');
        const scrollIndicator = document.getElementById('scrollIndicator');
        
        function updateScrollIndicator() {
            if (!navLinks || !scrollIndicator) return;
            
            const maxScroll = navLinks.scrollWidth - navLinks.clientWidth;
            const currentScroll = navLinks.scrollLeft;
            
            if (maxScroll <= 0) {
                scrollIndicator.style.display = 'none';
                return;
            }
            
            scrollIndicator.style.display = 'flex';
            
            if (currentScroll > 5) {
                scrollIndicator.textContent = '‚óÄÔ∏é';
                scrollIndicator.style.left = '0';
                scrollIndicator.style.right = 'auto';
            } else if (currentScroll < maxScroll - 5) {
                scrollIndicator.textContent = '‚ñ∂Ô∏é';
                scrollIndicator.style.left = 'auto';
                scrollIndicator.style.right = '0';
            } else {
                scrollIndicator.style.display = 'none';
            }
        }
        
        if (navLinks) {
            navLinks.addEventListener('scroll', updateScrollIndicator);
            window.addEventListener('resize', updateScrollIndicator);
            updateScrollIndicator();
        }
        
        if (scrollIndicator) {
            scrollIndicator.addEventListener('click', () => {
                const scrollAmount = 200;
                if (scrollIndicator.textContent === '‚ñ∂Ô∏é') {
                    navLinks.scrollBy({ left: scrollAmount, behavior: 'smooth' });
                } else {
                    navLinks.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
                }
            });
        }
        
        fetchTeams();
    </script>
</body>
</html>
