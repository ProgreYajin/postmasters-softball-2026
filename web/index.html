<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026å¹´åº¦åƒè‘‰çœŒéƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š</title>
    <script src="/config.js"></script>
    <style>
        /* CSS: ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif; background: #f5f5f5; color: #333; }
        header { background: #003366; color: white; position: sticky; top: 0; z-index: 1000; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .header-top { background: #002244; padding: 12px 0; font-size: 0.85em; }
        .header-top-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .header-logo { cursor: pointer; text-decoration: none; color: white; display: flex; align-items: center; }
        .header-logo img { height: 35px; width: auto; }
        .header-logo-text { display: none; font-size: 1.1em; font-weight: bold; }
        .header-logo.fallback img { display: none; }
        .header-logo.fallback .header-logo-text { display: block; }
        .header-main { max-width: 1200px; margin: 0 auto; padding: 15px 20px; }
        .nav-links { display: flex; gap: 25px; overflow-x: auto; padding-bottom: 5px; }
        .nav-links a { color: white; text-decoration: none; font-size: 0.95em; white-space: nowrap; }
        .hero { background: linear-gradient(to right, #003366, #005599); color: white; padding: 60px 20px; text-align: center; }
        .hero h1 { font-size: 2.5em; margin-bottom: 15px; font-weight: 300; letter-spacing: 2px; }
        .photo-slider-section { background: white; padding: 0; }
        .slider-container { max-width: 1200px; margin: 0 auto; position: relative; height: 400px; overflow: hidden; background: #000; }
        .slider-track { display: flex; transition: transform 0.5s ease; height: 100%; }
        .slide { min-width: 100%; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; }
        .slide img { width: 100%; height: 100%; object-fit: cover; }
        .slide.placeholder { background: linear-gradient(135deg, #003366 0%, #005599 100%); color: white; font-size: 4em; }
        .slider-overlay { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.7), transparent); padding: 30px; color: white; }
        .slider-dots { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; z-index: 10; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background: rgba(255,255,255,0.5); cursor: pointer; }
        .dot.active { background: white; width: 30px; border-radius: 5px; }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }
        .section-title { font-size: 1.8em; font-weight: 300; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 3px solid #003366; }
        .tabs { display: flex; gap: 2px; margin-bottom: 30px; border-bottom: 2px solid #e0e0e0; }
        .tab { padding: 15px 30px; background: #f5f5f5; border: none; font-size: 1em; color: #666; cursor: pointer; flex: 1; border-top: 3px solid transparent; }
        .tab.active { background: white; color: #003366; border-top-color: #003366; font-weight: bold; }
        .court-content { display: none; }
        .court-content.active { display: block; }
        .games-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .game-card { background: white; border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden; cursor: pointer; transition: 0.3s; }
        .game-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); transform: translateY(-2px); }
        .game-header { background: #f8f8f8; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #e0e0e0; }
        .status { padding: 4px 12px; border-radius: 3px; font-size: 0.85em; font-weight: bold; }
        .status.playing { background: #d32f2f; color: white; }
        .status.finished { background: #388e3c; color: white; }
        .matchup { padding: 20px 15px; }
        .matchup-line { display: flex; justify-content: space-between; align-items: center; }
        .team-score { font-size: 1.8em; font-weight: bold; color: #003366; }
        .quick-links { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 40px; }
        .link-card { background: white; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; text-align: center; text-decoration: none; color: #333; }
        footer { background: #002244; color: white; padding: 20px; text-align: center; margin-top: 60px; }
        .loading { text-align: center; padding: 60px; }
        .error-container { background: #fff3cd; padding: 30px; text-align: center; border-radius: 8px; margin: 20px 0; }
        @media (max-width: 768px) { .hero h1 { font-size: 1.8em; } .slider-container { height: 250px; } .games-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <header>
        <div class="header-top">
            <div class="header-top-content">
                <a href="#" class="header-logo" id="headerLogo">
                    <img src="https://drive.google.com/thumbnail?id=1i01jLSCnme9KdDuBwL8MufLNGdeo_d0x" alt="å…¨å›½éƒµä¾¿å±€é•·ä¼š" onerror="App.handleLogoError()">
                    <span class="header-logo-text">ğŸ£ å…¨å›½éƒµä¾¿å±€é•·ä¼š</span>
                </a>
                <div class="header-info">2026å¹´åƒè‘‰çœŒéƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š | 2026.6.6</div>
            </div>
        </div>
        <div class="header-main">
            <nav class="nav-links">
                <a href="scoreboard.html">è©¦åˆé€Ÿå ±</a>
                <a href="gallery.html">å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼</a>
                <a href="schedule.html">å¤§ä¼šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a>
                <a href="tournament.html">ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨</a>
                <a href="teams.html">ãƒãƒ¼ãƒ ãƒ»é¸æ‰‹ä¸€è¦§</a>
                <a href="venue.html">ä¼šå ´æ¡ˆå†…</a>
                <a href="rules.html">è¦ç´„</a>
                <a href="history.html">å„ªå‹è¨˜éŒ²</a>
            </nav>
        </div>
    </header>

    <div class="hero">
        <div class="hero-content">
            <h1>2026å¹´åƒè‘‰çœŒéƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š</h1>
            <div class="hero-info">2026å¹´6æœˆ6æ—¥ï¼ˆåœŸï¼‰ğŸ“ ä½å€‰å¸‚å²©åé‹å‹•å…¬åœ’</div>
        </div>
    </div>

    <div class="photo-slider-section">
        <div class="slider-container">
            <div class="slider-track" id="sliderTrack">
                <div class="slide placeholder">ğŸ“·</div>
            </div>
            <div class="slider-dots" id="sliderDots"></div>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">è©¦åˆé€Ÿå ±</h2>
        <div class="tabs" id="tabs"></div>
        <div id="content"><div class="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</div></div>

        <h2 class="section-title" style="margin-top: 60px;">å¤§ä¼šæƒ…å ±</h2>
        <div class="quick-links">
            <a href="scoreboard.html" class="link-card">âš¡ è©¦åˆé€Ÿå ±</a>
            <a href="gallery.html" class="link-card">ğŸ“¸ å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼</a>
            <a href="schedule.html" class="link-card">ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a>
            <a href="tournament.html" class="link-card">ğŸ† ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨</a>
        </div>
    </div>

    <footer>Â© 2026 åƒè‘‰çœŒå°æ—›åœ°åŒºéƒµä¾¿å±€é•·ä¼š</footer>

    <script>
        const App = (() => {
            const state = {
                apiUrls: { staff: null, audience: null },
                currentCourt: null,
                gamesData: null,
                timers: { scores: null, gallery: null, slider: null },
                slider: { currentSlide: 0, totalSlides: 0 },
                isInitialized: false
            };

            const CONSTANTS = { FETCH_INTERVAL: 60000, SLIDER_INTERVAL: 5000, MAX_GALLERY_PHOTOS: 5 };

            const Utils = {
                escapeHtml: (str) => String(str || '').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])),
                createErrorDisplay: (msg, fn) => `<div class="error-container">âš ï¸ ${msg} <br><button class="retry-button" onclick="App.${fn}()">å†è©¦è¡Œ</button></div>`
            };

            const API = {
                fetchData: async (url) => {
                    const resp = await fetch(`${url}?t=${Date.now()}`);
                    if (!resp.ok) throw new Error('é€šä¿¡å¤±æ•—');
                    return resp.json();
                }
            };

            const Slider = {
                init(count) {
                    state.slider.totalSlides = count;
                    state.slider.currentSlide = 0;
                    const dots = document.getElementById('sliderDots');
                    dots.innerHTML = Array.from({length: count}, (_, i) => `<div class="dot ${i===0?'active':''}" onclick="App.goToSlide(${i})"></div>`).join('');
                    this.start();
                },
                start() {
                    clearInterval(state.timers.slider);
                    if (state.slider.totalSlides > 1) {
                        state.timers.slider = setInterval(() => {
                            state.slider.currentSlide = (state.slider.currentSlide + 1) % state.slider.totalSlides;
                            this.update();
                        }, CONSTANTS.SLIDER_INTERVAL);
                    }
                },
                update() {
                    const track = document.getElementById('sliderTrack');
                    const dots = document.querySelectorAll('.dot');
                    track.style.transform = `translateX(-${state.slider.currentSlide * 100}%)`;
                    dots.forEach((d, i) => d.classList.toggle('active', i === state.slider.currentSlide));
                }
            };

            const UI = {
                renderGames(data) {
                    const content = document.getElementById('content');
                    if (!data?.games?.length) return content.innerHTML = 'ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“';
                    
                    const courts = [...new Set(data.games.map(g => g.court))].sort();
                    state.currentCourt = state.currentCourt || courts[0];
                    
                    document.getElementById('tabs').innerHTML = courts.map(c => 
                        `<button class="tab ${c===state.currentCourt?'active':''}" onclick="App.switchCourt('${c}')">${c}ã‚³ãƒ¼ãƒˆ</button>`
                    ).join('');

                    content.innerHTML = courts.map(c => `
                        <div class="court-content ${c===state.currentCourt?'active':''}" id="court-${c}">
                            <div class="games-grid">
                                ${data.games.filter(g => g.court === c).map(g => `
                                    <div class="game-card" onclick="App.openScoreboard('${g.court}', ${g.gameNum})">
                                        <div class="game-header"><span>ç¬¬${g.gameNum}è©¦åˆ</span><span class="status ${g.status==='è©¦åˆä¸­'?'playing':''}">${g.status}</span></div>
                                        <div class="matchup"><div class="matchup-line"><span>${g.homeTeam}</span><span class="team-score">${g.homeTotal}</span><span>-</span><span class="team-score">${g.awayTotal}</span><span>${g.awayTeam}</span></div></div>
                                    </div>`).join('')}
                            </div>
                        </div>`).join('');
                },
                renderSlider(photos) {
                    const track = document.getElementById('sliderTrack');
                    if (!photos?.length) return;
                    track.innerHTML = photos.slice(0, 5).map(p => `<div class="slide"><img src="${p.thumbnail}" onerror="this.src=''"></div>`).join('');
                    Slider.init(Math.min(photos.length, 5));
                }
            };

            return {
                init: async () => {
                    try {
                        state.apiUrls.staff = await getApiUrl('staff');
                        state.apiUrls.audience = await getApiUrl('audience');
                        const [scores, gallery] = await Promise.all([API.fetchData(state.apiUrls.staff), API.fetchData(state.apiUrls.audience || state.apiUrls.staff)]);
                        UI.renderGames(scores);
                        UI.renderSlider(gallery.photos);
                        state.timers.scores = setInterval(async () => UI.renderGames(await API.fetchData(state.apiUrls.staff)), CONSTANTS.FETCH_INTERVAL);
                    } catch (e) { document.getElementById('content').innerHTML = Utils.createErrorDisplay(e.message, 'init'); }
                },
                switchCourt: (c) => { 
                    state.currentCourt = c;
                    document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.innerText.includes(c)));
                    document.querySelectorAll('.court-content').forEach(con => con.classList.toggle('active', con.id === `court-${c}`));
                },
                goToSlide: (i) => { state.slider.currentSlide = i; Slider.update(); Slider.start(); },
                handleLogoError: () => document.getElementById('headerLogo').classList.add('fallback'),
                openScoreboard: (c, n) => location.href = `scoreboard.html?court=${encodeURIComponent(c)}&game=${n}`
            };
        })();

        document.addEventListener('DOMContentLoaded', App.init);
    </script>
</body>
</html>
