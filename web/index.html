<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026å¹´åº¦åƒè‘‰çœŒéƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            background: #003366;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header-top {
            background: #002244;
            padding: 12px 0;
            font-size: 0.85em;
        }
        
        .header-top-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-logo {
            cursor: pointer;
            transition: opacity 0.3s;
            text-decoration: none;
            color: white;
            display: flex;
            align-items: center;
        }
        
        .header-logo:hover {
            opacity: 0.8;
        }
        
        .header-logo img {
            height: 35px;
            width: auto;
            display: block;
        }
        
        /* ãƒ­ã‚´ç”»åƒã‚¨ãƒ©ãƒ¼æ™‚ã®ä»£æ›¿ãƒ†ã‚­ã‚¹ãƒˆç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .header-logo-text {
            display: none;
            font-size: 1.1em;
            font-weight: bold;
        }
        
        .header-logo.fallback img {
            display: none;
        }
        
        .header-logo.fallback .header-logo-text {
            display: block;
        }
        
        .header-info {
            color: #aaa;
            font-size: 0.9em;
        }
        
        .header-main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px 20px;
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding-bottom: 5px;
        }
        
        .nav-links::-webkit-scrollbar {
            display: none;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-size: 0.95em;
            transition: opacity 0.3s;
            white-space: nowrap;
        }
        
        .nav-links a:hover {
            opacity: 0.7;
        }
        
        /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¨ãƒªã‚¢ */
        .hero {
            background: linear-gradient(to right, #003366, #005599);
            color: white;
            padding: 60px 20px;
            text-align: center;
        }
        
        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .hero h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        .hero-info {
            font-size: 1.2em;
            opacity: 0.9;
            margin-top: 10px;
        }
        
        .hero-date {
            font-size: 1.3em;
            margin-bottom: 8px;
        }
        
        .hero-venue {
            font-size: 1.1em;
        }
        
        /* å†™çœŸã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ */
        .photo-slider-section {
            background: white;
            padding: 0;
        }
        
        .slider-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            height: 400px;
            overflow: hidden;
        }
        
        .slider-track {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }
        
        .slide {
            min-width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .slide.placeholder {
            background: linear-gradient(135deg, #003366 0%, #005599 100%);
            color: white;
            font-size: 4em;
        }
        
        .slider-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            padding: 30px;
            color: white;
        }
        
        .slider-title {
            font-size: 1.3em;
            margin-bottom: 5px;
        }
        
        .slider-subtitle {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .slider-dots {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .dot.active {
            background: white;
            width: 30px;
            border-radius: 5px;
        }
        
        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .section-title {
            font-size: 1.8em;
            font-weight: 300;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #003366;
            letter-spacing: 1px;
        }
        
        /* ã‚¿ãƒ– */
        .tabs {
            display: flex;
            gap: 2px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            padding: 15px 30px;
            background: #f5f5f5;
            border: none;
            font-size: 1em;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            border-top: 3px solid transparent;
            flex: 1;
        }
        
        .tab.active {
            background: white;
            color: #003366;
            border-top-color: #003366;
            font-weight: bold;
        }
        
        .tab:hover:not(.active) {
            background: #fff;
        }
        
        .court-content {
            display: none;
        }
        
        .court-content.active {
            display: block;
        }
        
        /* è©¦åˆã‚«ãƒ¼ãƒ‰ */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .game-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .game-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .game-header {
            background: #f8f8f8;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .game-number {
            font-weight: bold;
            color: #003366;
        }
        
        .status {
            padding: 4px 12px;
            border-radius: 3px;
            font-size: 0.85em;
            font-weight: bold;
        }
        
        .status.playing {
            background: #d32f2f;
            color: white;
        }
        
        .status.waiting {
            background: #757575;
            color: white;
        }
        
        .status.finished {
            background: #388e3c;
            color: white;
        }
        
        .matchup {
            padding: 20px 15px;
        }
        
        .matchup-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }
        
        .team-name {
            font-size: 1.1em;
            font-weight: 500;
            flex: 1;
        }
        
        .team-name.home {
            text-align: left;
        }
        
        .team-name.away {
            text-align: right;
        }
        
        .score-separator {
            font-size: 1.5em;
            font-weight: bold;
            color: #003366;
            padding: 0 10px;
        }
        
        .team-score {
            font-size: 1.8em;
            font-weight: bold;
            color: #003366;
            min-width: 40px;
            text-align: center;
        }
        
        .inning-info {
            text-align: center;
            padding: 8px;
            background: #f8f8f8;
            font-size: 0.9em;
            color: #666;
        }
        
        /* ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯ */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .link-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 30px 20px;
            text-align: center;
            text-decoration: none;
            color: #333;
            transition: all 0.3s;
        }
        
        .link-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
            border-color: #003366;
        }
        
        .link-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .link-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .link-description {
            font-size: 0.9em;
            color: #666;
        }
        
        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            background: #002244;
            color: white;
            padding: 20px;
            margin-top: 60px;
            text-align: center;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .copyright {
            font-size: 0.85em;
            opacity: 0.6;
        }
        
        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f0f0f0;
            border-top: 4px solid #003366;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .scroll-indicator {
            display: none;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .header-main {
                position: relative;
                overflow: hidden;
            }
            
            .nav-links {
                width: 100%;
                justify-content: flex-start;
                padding-bottom: 5px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                flex-wrap: nowrap;
            }
            
            .nav-links a {
                flex-shrink: 0;
            }
            
            /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆå·¦å³åˆ†é›¢ï¼‰ */
            .scroll-indicator {
                display: none;
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                height: 47px;
                width: 30px;
                align-items: center;
                justify-content: center;
                font-size: 1.2em;
                color: white;
                background-color: #003366;
                cursor: pointer;
                z-index: 10;
            }
            .scroll-indicator.left {
                left: 0;
                right: auto;
            }
            .scroll-indicator.right {
                right: 0;
                left: auto;
            }
            
            .hero h1 {
                font-size: 1.8em;
            }
            
            .slider-container {
                height: 250px;
            }
            
            .tabs {
                overflow-x: auto;
            }
            
            .tab {
                padding: 12px 20px;
                white-space: nowrap;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-top">
            <div class="header-top-content">
                <a href="#" class="header-logo" id="headerLogo">
                    <img src="https://drive.google.com/thumbnail?id=1i01jLSCnme9KdDuBwL8MufLNGdeo_d0x" alt="å…¨å›½éƒµä¾¿å±€é•·ä¼š" onerror="handleLogoError()">
                    <span class="header-logo-text">ğŸ£ å…¨å›½éƒµä¾¿å±€é•·ä¼š</span>
                </a>
                <div class="header-info">
                    2026å¹´éƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š | 2026.6.6
                </div>
            </div>
        </div>
        <div class="header-main">
            <nav class="nav-links" id="navLinks">
                <a href="scoreboard.html" class="dynamic-link">è©¦åˆé€Ÿå ± / è©¦åˆçµæœ</a>
                <a href="gallery.html" class="dynamic-link">å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼</a>
                <a href="schedule.html" class="dynamic-link">å¤§ä¼šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a>
                <a href="tournament.html" class="dynamic-link">ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨</a>
                <a href="teams.html" class="dynamic-link">ãƒãƒ¼ãƒ ãƒ»é¸æ‰‹ä¸€è¦§</a>
                <a href="venue.html" class="dynamic-link">ä¼šå ´æ¡ˆå†…ãƒ»ã‚¢ã‚¯ã‚»ã‚¹</a>
                <a href="rules.html" class="dynamic-link">å¤§ä¼šãƒ«ãƒ¼ãƒ«ãƒ»è¦ç´„</a>
                <a href="history.html" class="dynamic-link">å„ªå‹è¨˜éŒ²ãƒ»æ­´å²</a>
            </nav>
            <div class="scroll-indicator left" id="scrollIndicatorLeft">â—€ï¸</div>
            <div class="scroll-indicator right" id="scrollIndicatorRight">â–¶ï¸</div>
        </div>
    </header>
    
    <div class="hero">
        <div class="hero-content">
            <h1>2026å¹´åƒè‘‰çœŒéƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š</h1>
            <div class="hero-info">
                <div class="hero-date">2026å¹´6æœˆ6æ—¥ï¼ˆåœŸï¼‰é–‹å‚¬</div>
                <div class="hero-venue">ğŸ“ ä½å€‰å¸‚å²©åé‹å‹•å…¬åœ’</div>
            </div>
        </div>
    </div>
    
    <div class="photo-slider-section">
        <div class="slider-container">
            <div class="slider-track" id="sliderTrack">
                <div class="slide placeholder">
                    ğŸ“·
                    <div class="slider-overlay">
                        <div class="slider-title">ãƒ•ã‚©ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼</div>
                        <div class="slider-subtitle">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å†™çœŸã‚’è¦‹ã‚‹</div>
                    </div>
                </div>
            </div>
            <div class="slider-dots" id="sliderDots"></div>
        </div>
    </div>
    
    <div class="container">
        <h2 class="section-title" id="scores">è©¦åˆé€Ÿå ±</h2>
        
        <div class="tabs" id="tabs"></div>
        
        <div id="content">
            <div class="loading">
                <div class="loading-spinner"></div>
                <div>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</div>
            </div>
        </div>
        
        <h2 class="section-title" style="margin-top: 60px;">å¤§ä¼šæƒ…å ±</h2>
        
        <div class="quick-links">
            <a href="scoreboard.html" class="link-card dynamic-link">
                <div class="link-icon">âš¡</div>
                <div class="link-title">è©¦åˆé€Ÿå ± / è©¦åˆçµæœ</div>
                <div class="link-description">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ã‚³ã‚¢</div>
            </a>

            <a href="gallery.html" class="link-card dynamic-link">
                <div class="link-icon">ğŸ“¸</div>
                <div class="link-title">å†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼</div>
                <div class="link-description">å¤§ä¼šã®æ§˜å­ã‚’å†™çœŸã§</div>
            </a>
            
            <a href="schedule.html" class="link-card dynamic-link">
                <div class="link-icon">ğŸ“…</div>
                <div class="link-title">å¤§ä¼šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</div>
                <div class="link-description">å½“æ—¥ã®ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«</div>
            </a>
            
            <a href="tournament.html" class="link-card dynamic-link">
                <div class="link-icon">ğŸ†</div>
                <div class="link-title">ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨</div>
                <div class="link-description">å¯¾æˆ¦çµ„ã¿åˆã‚ã›</div>
            </a>
            
            <a href="teams.html" class="link-card dynamic-link">
                <div class="link-icon">ğŸ‘¥</div>
                <div class="link-title">ãƒãƒ¼ãƒ ãƒ»é¸æ‰‹ä¸€è¦§</div>
                <div class="link-description">å‚åŠ ãƒãƒ¼ãƒ ç´¹ä»‹</div>
            </a>
            
            <a href="venue.html" class="link-card dynamic-link">
                <div class="link-icon">ğŸ“</div>
                <div class="link-title">ä¼šå ´æ¡ˆå†…ãƒ»ã‚¢ã‚¯ã‚»ã‚¹</div>
                <div class="link-description">ã‚¢ã‚¯ã‚»ã‚¹ãƒ»æ–½è¨­æƒ…å ±</div>
            </a>
            
            <a href="rules.html" class="link-card dynamic-link">
                <div class="link-icon">ğŸ“‹</div>
                <div class="link-title">å¤§ä¼šãƒ«ãƒ¼ãƒ«ãƒ»è¦ç´„</div>
                <div class="link-description">ç«¶æŠ€è¦å‰‡ãƒ»æ³¨æ„äº‹é …</div>
            </a>
            
            <a href="history.html" class="link-card dynamic-link">
                <div class="link-icon">ğŸ¥‡</div>
                <div class="link-title">å„ªå‹è¨˜éŒ²ãƒ»æ­´å²</div>
                <div class="link-description">æ­´ä»£å„ªå‹ãƒãƒ¼ãƒ </div>
            </a>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="copyright">
                Â© 2025 Softball Tournament. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        // ===========================================
        // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: XSSå¯¾ç­–ç”¨HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—é–¢æ•°
        // ===========================================
        /**
         * HTMLç‰¹æ®Šæ–‡å­—ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ã¦XSSæ”»æ’ƒã‚’é˜²ã
         * @param {string} str - ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã™ã‚‹æ–‡å­—åˆ—
         * @return {string} - ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚ŒãŸæ–‡å­—åˆ—
         */
        function escapeHtml(str) {
            if (str == null) return '';
            return String(str)
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#039;');
        }
        
        // ===========================================
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£: æ—¥æ™‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        // ===========================================
        /**
         * ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ MM/DD HH:MM å½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
         */
        function formatTimestamp(timestamp) {
            if (!timestamp) return '';
            
            if (timestamp.includes('T') && timestamp.includes('Z')) {
                const date = new Date(timestamp);
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const hours = String(date.getHours()).padStart(2, '0');
                const minutes = String(date.getMinutes()).padStart(2, '0');
                return `${month}/${day} ${hours}:${minutes}`;
            }
            // æ—¢ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿ã€ã¾ãŸã¯ä¸æ˜ãªå½¢å¼ã®å ´åˆã¯ãã®ã¾ã¾è¿”ã™
            if (timestamp.match(/^\d{2}\/\d{2}\s+\d{2}:\d{2}$/)) {
                return timestamp;
            }
            return timestamp;
        }

        // ===========================================
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å–å¾—ã¨localStorageä¿å­˜
        // ===========================================
        const urlParams = new URLSearchParams(window.location.search);
        // staff_apiã‚’å„ªå…ˆã€ãªã‘ã‚Œã°localStorageã€ãã‚Œã§ã‚‚ãªã‘ã‚Œã°ç©º
        const STAFF_API_URL = urlParams.get('staff_api') || localStorage.getItem('STAFF_BOT_API_URL') || '';
        const AUDIENCE_API_URL = urlParams.get('audience_api') || localStorage.getItem('AUDIENCE_BOT_API_URL') || '';
        
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æŒ‡å®šã•ã‚ŒãŸå ´åˆã¯localStorageã«ä¿å­˜
        if (urlParams.get('staff_api')) {
            localStorage.setItem('STAFF_BOT_API_URL', urlParams.get('staff_api'));
        }
        if (urlParams.get('audience_api')) {
            localStorage.setItem('AUDIENCE_BOT_API_URL', urlParams.get('audience_api'));
        }
        // å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ã€'api'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚'staff_api'ã¨ã—ã¦æ‰±ã†
        if (urlParams.get('api')) {
            localStorage.setItem('STAFF_BOT_API_URL', urlParams.get('api'));
        }

        // ãƒ­ã‚°å‡ºåŠ›ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
        console.log("--- API URL Status ---");
        console.log("STAFF_API_URL:", STAFF_API_URL || "(æœªè¨­å®š)");
        console.log("AUDIENCE_API_URL:", AUDIENCE_API_URL || "(æœªè¨­å®š)");
        console.log("----------------------");


        // ===========================================
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã¸ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ä¸
        // ===========================================
        /**
         * dynamic-linkã‚¯ãƒ©ã‚¹ã‚’æŒã¤ã™ã¹ã¦ã®ãƒªãƒ³ã‚¯ã«å¯¾ã—ã¦ã€
         * ç¾åœ¨ã®URLã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è‡ªå‹•ã§ä»˜ä¸
         */
        function initializeDynamicLinks() {
            const dynamicLinks = document.querySelectorAll('.dynamic-link');
            const currentParams = new URLSearchParams(window.location.search);
            
            dynamicLinks.forEach(link => {
                const url = new URL(link.href, window.location.origin);
                const targetParams = new URLSearchParams(url.search);

                // ç¾åœ¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆé‡è¤‡ã—ãªã„ã‚ˆã†ã«ï¼‰
                currentParams.forEach((value, key) => {
                    if (!targetParams.has(key)) {
                        targetParams.set(key, value);
                    }
                });

                // gallery.htmlã«ã¯'audience_api'ã¾ãŸã¯'api'ã‚’ã€
                // ãã®ä»–ã®ãƒšãƒ¼ã‚¸ã«ã¯'staff_api'ã¾ãŸã¯'api'ã‚’è¨­å®š
                const filename = url.pathname.split('/').pop();
                if (filename === 'gallery.html') {
                    // AUDIENCE_API_URLãŒæœ‰åŠ¹ãªã‚‰å„ªå…ˆã—ã¦ã‚»ãƒƒãƒˆ
                    const apiToUse = AUDIENCE_API_URL || STAFF_API_URL;
                    if (apiToUse && !targetParams.has('api')) {
                        targetParams.set('api', apiToUse);
                    }
                } else {
                    // ãã®ä»–ã®ãƒšãƒ¼ã‚¸ã¯STAFF_API_URLã‚’å„ªå…ˆã—ã¦ã‚»ãƒƒãƒˆ
                    if (STAFF_API_URL && !targetParams.has('api')) {
                        targetParams.set('api', STAFF_API_URL);
                    }
                }

                // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹å ´åˆã®ã¿æ›´æ–°
                if (targetParams.toString()) {
                    url.search = targetParams.toString();
                    link.href = url.toString();
                }
            });
        }

        // ===========================================
        // ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ­ã‚´ç”»åƒã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        // ===========================================
        /**
         * ãƒ­ã‚´ç”»åƒã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ãŸå ´åˆã€ä»£æ›¿ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤º
         */
        function handleLogoError() {
            const logoElement = document.getElementById('headerLogo');
            if (logoElement) {
                logoElement.classList.add('fallback');
            }
        }

        // ===========================================
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        // ===========================================
        let currentCourt = null;
        let gamesData = null;
        let currentSlide = 0;
        let sliderInterval = null;

        // ===========================================
        // å†™çœŸã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼æ©Ÿèƒ½
        // ===========================================
        /**
         * ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®ãƒ‰ãƒƒãƒˆã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’åˆæœŸåŒ–
         */
        function initSlider(photoCount = 1) {
            const dots = document.getElementById('sliderDots');
            dots.innerHTML = '';
            for (let i = 0; i < photoCount; i++) {
                const dot = document.createElement('div');
                dot.className = `dot ${i === 0 ? 'active' : ''}`;
                dot.onclick = () => goToSlide(i);
                dots.appendChild(dot);
            }
            // è‡ªå‹•ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’é–‹å§‹ï¼ˆ5ç§’ã”ã¨ï¼‰
            if (sliderInterval) clearInterval(sliderInterval);
            sliderInterval = setInterval(nextSlide, 5000);
        }

        /**
         * æ¬¡ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã¸ç§»å‹•
         */
        function nextSlide() {
            const slides = document.querySelectorAll('.slide');
            if (slides.length === 0) return;
            
            const dots = document.querySelectorAll('.dot');
            currentSlide = (currentSlide + 1) % slides.length;
            document.getElementById('sliderTrack').style.transform = `translateX(-${currentSlide * 100}%)`;
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        /**
         * æŒ‡å®šã—ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã¸ç§»å‹•
         */
        function goToSlide(index) {
            const slides = document.querySelectorAll('.slide');
            if (slides.length === 0) return;

            const dots = document.querySelectorAll('.dot');
            currentSlide = index;
            document.getElementById('sliderTrack').style.transform = `translateX(-${currentSlide * 100}%)`;
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSlide);
            });
        }

        // ===========================================
        // ã‚®ãƒ£ãƒ©ãƒªãƒ¼å†™çœŸå–å¾—ã¨è¡¨ç¤º
        // ===========================================
        /**
         * è¦³å®¢ç”¨APIã‹ã‚‰ã‚®ãƒ£ãƒ©ãƒªãƒ¼å†™çœŸã‚’å–å¾—
         */
        async function fetchGalleryPhotos() {
            const targetApi = AUDIENCE_API_URL || STAFF_API_URL;
            if (!targetApi) {
                console.log('ã‚®ãƒ£ãƒ©ãƒªãƒ¼APIæœªè¨­å®šã®ãŸã‚ã€å†™çœŸå–å¾—ã‚’ã‚¹ã‚­ãƒƒãƒ—');
                return;
            }
        
            try {
                const timestamp = new Date().getTime();
                const response = await fetch(`${targetApi}?t=${timestamp}`, {
                    method: 'GET',
                    mode: 'cors',
                    cache: 'no-cache'
                });
                
                if (!response.ok) {
                    console.error('ã‚®ãƒ£ãƒ©ãƒªãƒ¼å†™çœŸå–å¾—å¤±æ•—:', response.status);
                    return;
                }
                
                const text = await response.text();
                if (!text || text.trim() === '') {
                    console.log('ã‚®ãƒ£ãƒ©ãƒªãƒ¼APIã‹ã‚‰ã®å¿œç­”ãŒç©ºã§ã™');
                    return;
                }
                
                const data = JSON.parse(text);
                console.log('ã‚®ãƒ£ãƒ©ãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸ:', data); // ãƒ‡ãƒãƒƒã‚°ç”¨
        
                if (data.photos && Array.isArray(data.photos) && data.photos.length > 0) {
                    updateGallerySlider(data.photos);
                } else {
                    console.log('ã‚®ãƒ£ãƒ©ãƒªãƒ¼å†™çœŸãŒ0ä»¶ã§ã™');
                }
            } catch (error) {
                console.error('ã‚®ãƒ£ãƒ©ãƒªãƒ¼å†™çœŸå–å¾—ã‚¨ãƒ©ãƒ¼:', error.message);
                // ã‚¨ãƒ©ãƒ¼ã§ã‚‚ãƒšãƒ¼ã‚¸è¡¨ç¤ºã¯ç¶šè¡Œ
            }
        }

        /**
         * ã‚®ãƒ£ãƒ©ãƒªãƒ¼å†™çœŸã‚’ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã«åæ˜ 
         */
        function updateGallerySlider(photos) {
            const sliderTrack = document.getElementById('sliderTrack');
            const photosToShow = photos.slice(0, 5); // æœ€æ–°5æšã¾ã§è¡¨ç¤º
            sliderTrack.innerHTML = '';

            if (photosToShow.length === 0) {
                // å†™çœŸãŒãªã„å ´åˆã¯ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’æ®‹ã™
                sliderTrack.innerHTML = `
                    <div class="slide placeholder">
                        ğŸ“·
                        <div class="slider-overlay">
                            <div class="slider-title">ãƒ•ã‚©ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼</div>
                            <div class="slider-subtitle">ã¾ã å†™çœŸãŒæŠ•ç¨¿ã•ã‚Œã¦ã„ã¾ã›ã‚“</div>
                        </div>
                    </div>
                `;
                initSlider(1); // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã¨ã—ã¦1æšã¨ã—ã¦æ‰±ã†
                return;
            }

            photosToShow.forEach(photo => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                slide.style.cursor = 'pointer'; 
                // ã‚¯ãƒªãƒƒã‚¯ã§ã‚®ãƒ£ãƒ©ãƒªãƒ¼ãƒšãƒ¼ã‚¸ã¸é·ç§»
                slide.onclick = () => {
                    const params = new URLSearchParams();
                    const targetApi = AUDIENCE_API_URL || STAFF_API_URL;
                    if (targetApi) params.set('api', targetApi);
                    window.location.href = `gallery.html?${params.toString()}`;
                };

                const img = document.createElement('img');
                img.src = photo.thumbnail;
                img.alt = 'å¤§ä¼šå†™çœŸ';
                img.loading = 'eager';
                // ç”»åƒèª­ã¿è¾¼ã¿å¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                img.onerror = function() {
                    slide.innerHTML = '<div class="slide placeholder">ğŸ“·</div>'; // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼HTMLã§ç½®ãæ›ãˆ
                };
                slide.appendChild(img);

                // ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤æƒ…å ±ï¼ˆXSSå¯¾ç­–æ¸ˆã¿ï¼‰
                const overlay = document.createElement('div');
                overlay.className = 'slider-overlay';
                const timestamp = formatTimestamp(photo.timestamp);
                overlay.innerHTML = `
                    <div class="slider-title">å¤§ä¼šå†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼</div>
                    <div class="slider-subtitle">${escapeHtml(timestamp)} æŠ•ç¨¿</div>
                `;
                slide.appendChild(overlay);

                sliderTrack.appendChild(slide);
            });
            initSlider(photosToShow.length);
        }

        // ===========================================
        // è©¦åˆãƒ‡ãƒ¼ã‚¿å–å¾—ã¨è¡¨ç¤º
        // ===========================================
        /**
         * ã‚¹ã‚¿ãƒƒãƒ•ç”¨APIã‹ã‚‰è©¦åˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
         */
        async function fetchScores() {
            const contentElement = document.getElementById('content');

            if (!STAFF_API_URL) {
                contentElement.innerHTML = `
                    <div class="loading">
                        <div>âŒ API URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚URLã« ?staff_api=... ã¾ãŸã¯ ?api=... ã‚’å«ã‚ã¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚</div>
                    </div>
                `;
                return;
            }

            try {
                const timestamp = new Date().getTime();
                const response = await fetch(`${STAFF_API_URL}?t=${timestamp}`, {
                    method: 'GET',
                    mode: 'cors',
                    cache: 'no-cache'
                });

                if (!response.ok) {
                    throw new Error(`ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼: HTTP Status ${response.status}`);
                }
                
                // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒJSONã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€è§£æ
                const data = await response.json();
                
                gamesData = data;
                displayGames(data);

            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                // ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¤º
                contentElement.innerHTML = `
                    <div class="loading">
                        <div>ğŸ”´ ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: ${error.message || 'é€šä¿¡ã‚¨ãƒ©ãƒ¼ã¾ãŸã¯APIã®å¿œç­”ãŒä¸æ­£ã§ã™'}</div>
                        <div>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–ã§è©³ç´°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ (CORSã‚¨ãƒ©ãƒ¼ã®å¯èƒ½æ€§ã‚ã‚Š)ã€‚</div>
                    </div>
                `;
            }
        }

        // ãƒ‡ãƒ¼ã‚¿è§£æç”¨ã®ãƒ¢ãƒƒã‚¯é–¢æ•°ï¼ˆAPIãƒ‡ãƒ¼ã‚¿æ§‹é€ ãŒä¸æ˜ãªãŸã‚ã€æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰æ¨æ¸¬ã—ã¦è£œå®Œï¼‰
        function getStatus(game) {
             return game.status || 'å¾…æ©Ÿä¸­'; // ä»®ã®ãƒ­ã‚¸ãƒƒã‚¯
        }
        function getStatusClass(status) {
            if (status === 'è©¦åˆä¸­') return 'playing';
            if (status === 'çµ‚äº†') return 'finished';
            return 'waiting';
        }
        
        // ã€ä¿®æ­£å¾Œã€‘ - è©¦åˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ç›´æ¥å¾—ç‚¹ã‚’å–å¾—
        function getTeamInfo(teamName, score) {
            const teamDisplayName = teamName || 'ä¸æ˜ãªãƒãƒ¼ãƒ '; 
            const totalScore = (score !== undefined && score !== null) ? score : 0;
            return {
                team: teamDisplayName,
                total: totalScore
            };
        }
        
        function getCurrentInning(game) {
            return game.currentInning ? `${game.currentInning} ã‚¤ãƒ‹ãƒ³ã‚°` : null;
        }
        
        /**
         * è©¦åˆãƒ‡ãƒ¼ã‚¿ã‚’ç”»é¢ã«è¡¨ç¤º
         */
        function displayGames(data) {
            const contentElement = document.getElementById('content');

            // ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ãƒã‚§ãƒƒã‚¯ã‚’å¼·åŒ–
            if (!data || typeof data !== 'object' || !Array.isArray(data.games) || data.games.length === 0) {
                contentElement.innerHTML = `
                    <div class="loading">
                        <div>âš ï¸ APIã‹ã‚‰æœ‰åŠ¹ãªè©¦åˆãƒ‡ãƒ¼ã‚¿ (gamesé…åˆ—) ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</div>
                        <div>Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿å½¢å¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</div>
                    </div>
                `;
                return;
            }

            // ã‚³ãƒ¼ãƒˆã”ã¨ã«è©¦åˆã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
            const courtGroups = {};
            data.games.forEach(game => {
                if (!game.court || !game.gameNum) return; // courtã¾ãŸã¯gameNumãŒãªã„ãƒ‡ãƒ¼ã‚¿ã¯ã‚¹ã‚­ãƒƒãƒ—

                if (!courtGroups[game.court]) {
                    courtGroups[game.court] = {};
                }
                // game.gameNum ãŒæ•°å€¤ã¾ãŸã¯æ•°å€¤æ–‡å­—åˆ—ã§ã‚ã‚‹ã“ã¨ã‚’å‰æ
                const gameNum = String(game.gameNum); 
                if (!courtGroups[game.court][gameNum]) {
                    courtGroups[game.court][gameNum] = [];
                }
                courtGroups[game.court][gameNum].push(game);
            });

            const courts = Object.keys(courtGroups).sort();
            if (courts.length === 0) {
                contentElement.innerHTML = `
                    <div class="loading">
                        <div>âš ï¸ å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿å†…ã«ã€æœ‰åŠ¹ãªã‚³ãƒ¼ãƒˆåãƒ»è©¦åˆç•ªå·ã‚’æŒã¤è©¦åˆãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</div>
                    </div>
                `;
                return;
            }

            // ç¾åœ¨ã®ã‚³ãƒ¼ãƒˆãŒæœªé¸æŠã¾ãŸã¯å­˜åœ¨ã—ãªã„å ´åˆã€æœ€åˆã®ã‚³ãƒ¼ãƒˆã‚’é¸æŠ
            if (!currentCourt || !courts.includes(currentCourt)) {
                currentCourt = courts[0];
            }

            // ã‚¿ãƒ–ã®ç”Ÿæˆï¼ˆXSSå¯¾ç­–æ¸ˆã¿ï¼‰
            let tabsHtml = '';
            courts.forEach(court => {
                const activeClass = court === currentCourt ? 'active' : '';
                tabsHtml += `<button class="tab ${activeClass}" onclick="switchCourt('${escapeHtml(court)}')">${escapeHtml(court)}ã‚³ãƒ¼ãƒˆ</button>`;
            });
            document.getElementById('tabs').innerHTML = tabsHtml;

            // å„ã‚³ãƒ¼ãƒˆã®è©¦åˆã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿæˆï¼ˆXSSå¯¾ç­–æ¸ˆã¿ï¼‰
            let contentHtml = '';
            courts.forEach(court => {
                const activeClass = court === currentCourt ? 'active' : '';
                contentHtml += `<div class="court-content ${activeClass}" id="court-${escapeHtml(court)}">`;
                contentHtml += '<div class="games-grid">';

                const games = courtGroups[court];
                const gameNums = Object.keys(games).sort((a, b) => parseInt(a) - parseInt(b));

                gameNums.forEach(gameNum => {
                    const game = games[gameNum][0]; // 1è©¦åˆç›®ã®ã¿è¡¨ç¤º
                    
                    // homeTeamã¨awayTeamãŒæ–‡å­—åˆ—ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆAPIå¿œç­”ä¾å­˜ï¼‰
                    if (typeof game.homeTeam !== 'string' || typeof game.awayTeam !== 'string') {
                         console.warn(`ã‚²ãƒ¼ãƒ ${gameNum} (${court}ã‚³ãƒ¼ãƒˆ) ã®ãƒãƒ¼ãƒ åãŒä¸æ­£ã§ã™ã€‚`, game);
                         return; 
                    }

                    const status = getStatus(game);
                    const statusClass = getStatusClass(status);
                    
                    // ã€ä¿®æ­£ç‚¹ã€‘å¾—ç‚¹å–å¾—ã®ãŸã‚ã«ã€APIå¿œç­”å…¨ä½“(data)ã‚’æ¸¡ã™
                    const homeTeam = getTeamInfo(game.homeTeam, game.homeScore); 
                    const awayTeam = getTeamInfo(game.awayTeam, game.awayScore);
                    
                    const currentInning = getCurrentInning(game);

                    // ã“ã“ã§ escapeHtml ã‚’é©ç”¨
                    contentHtml += `
                        <div class="game-card" onclick="openScoreboard('${escapeHtml(court)}', ${gameNum})">
                            <div class="game-header">
                                <span class="game-number">ç¬¬${gameNum}è©¦åˆ</span>
                                <span class="status ${statusClass}">${escapeHtml(status)}</span>
                            </div>
                            <div class="matchup">
                                <div class="matchup-line">
                                    <span class="team-name home">${escapeHtml(homeTeam.team)}</span>
                                    <span class="team-score">${homeTeam.total || 0}</span>
                                    <span class="score-separator">-</span>
                                    <span class="team-score">${awayTeam.total || 0}</span>
                                    <span class="team-name away">${escapeHtml(awayTeam.team)}</span>
                                </div>
                            </div>
                            ${currentInning ? `<div class="inning-info">${escapeHtml(currentInning)}</div>` : ''}
                        </div>
                    `;
                });
                contentHtml += '</div>'; // games-grid
                contentHtml += '</div>'; // court-content
            });
            contentElement.innerHTML = contentHtml;

            // ã‚³ãƒ¼ãƒˆåˆ‡ã‚Šæ›¿ãˆãŒåˆã‚ã¦è¡Œã‚ã‚ŒãŸã‹ã€ã¾ãŸã¯ã‚³ãƒ¼ãƒˆãƒªã‚¹ãƒˆãŒå¤‰æ›´ã•ã‚ŒãŸå ´åˆ
            switchCourt(currentCourt);
        }

        /**
         * ã‚³ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
         */
        function switchCourt(courtName) {
            currentCourt = courtName;
            
            // ã‚¿ãƒ–ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.toggle('active', tab.textContent.startsWith(courtName));
            });

            // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.court-content').forEach(content => {
                content.classList.remove('active');
            });

            const targetContent = document.getElementById(`court-${courtName}`);
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }
        
        // ===========================================
        // è©¦åˆè©³ç´°ç”»é¢ã¸ã®é·ç§»
        // ===========================================
        /**
         * ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰è©³ç´°ç”»é¢ã¸é·ç§»
         * @param {string} court - ã‚³ãƒ¼ãƒˆå
         * @param {number} gameNum - è©¦åˆç•ªå·
         */
        function openScoreboard(court, gameNum) {
            const params = new URLSearchParams();
            // APIãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä»˜ä¸ (staff_apiã‚’åˆ©ç”¨)
            if (STAFF_API_URL) params.set('api', STAFF_API_URL);

            // è©¦åˆæƒ…å ±ã‚’ä»˜ä¸
            params.set('court', court);
            params.set('game', gameNum);

            window.location.href = `scoreboard.html?${params.toString()}`;
        }

        // ===========================================
        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼æ©Ÿèƒ½
        // ===========================================
        const navLinks = document.getElementById('navLinks');
        const scrollIndicatorLeft = document.getElementById('scrollIndicatorLeft');
        const scrollIndicatorRight = document.getElementById('scrollIndicatorRight');
        const threshold = 10; // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é–‹å§‹ã‚’åˆ¤å®šã™ã‚‹é–¾å€¤

        /**
         * ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆçŸ¢å°ï¼‰ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’æ›´æ–°
         */
        function updateScrollIndicator() {
            if (!navLinks || !scrollIndicatorLeft || !scrollIndicatorRight) return;

            const maxScroll = navLinks.scrollWidth - navLinks.clientWidth;
            const currentScroll = navLinks.scrollLeft;

            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒå¿…è¦ãªã„å ´åˆï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„å¹…ãŒé ˜åŸŸå†…ã«åã¾ã£ã¦ã„ã‚‹å ´åˆï¼‰ã¯ä¸¡æ–¹éè¡¨ç¤º
            if (maxScroll <= threshold) {
                scrollIndicatorLeft.style.display = 'none';
                scrollIndicatorRight.style.display = 'none';
                return;
            }

            // å·¦çŸ¢å°: å·¦ã«æˆ»ã‚Œã‚‹ãªã‚‰è¡¨ç¤º (å·¦ç«¯ã‹ã‚‰é›¢ã‚Œã¦ã„ã‚‹)
            if (currentScroll > threshold) {
                scrollIndicatorLeft.style.display = 'flex';
            } else {
                scrollIndicatorLeft.style.display = 'none';
            }

            // å³çŸ¢å°: å³ã«é€²ã‚ã‚‹ãªã‚‰è¡¨ç¤º (å³ç«¯ã«åˆ°é”ã—ã¦ã„ãªã„)
            if (currentScroll < maxScroll - threshold) {
                scrollIndicatorRight.style.display = 'flex';
            } else {
                scrollIndicatorRight.style.display = 'none';
            }
        }
        
        // ===========================================
        // åˆæœŸåŒ–å‡¦ç†
        // ===========================================
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒ³ã‚¯ã«ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä»˜ä¸
        initializeDynamicLinks();
        
        // è©¦åˆãƒ‡ãƒ¼ã‚¿ã¨ã‚®ãƒ£ãƒ©ãƒªãƒ¼å†™çœŸã‚’å–å¾—
        fetchScores();
        fetchGalleryPhotos();
        
        // å®šæœŸçš„ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°ï¼ˆ60ç§’ã”ã¨ï¼‰
        setInterval(fetchScores, 60000);
        setInterval(fetchGalleryPhotos, 60000);
        
        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’åˆæœŸåŒ–ï¼ˆå†™çœŸå–å¾—å®Œäº†å¾Œã«å†™çœŸæšæ•°ã§å†åˆæœŸåŒ–ã•ã‚Œã¾ã™ï¼‰
        initSlider(1);
        
        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        if (navLinks) {
            navLinks.addEventListener('scroll', updateScrollIndicator);
            window.addEventListener('resize', updateScrollIndicator);
            updateScrollIndicator(); // åˆæœŸè¡¨ç¤º
        }
        
        if (scrollIndicatorLeft) {
            scrollIndicatorLeft.addEventListener('click', () => {
                navLinks.scrollBy({ left: -200, behavior: 'smooth' }); // å·¦ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            });
        }
        
        if (scrollIndicatorRight) {
            scrollIndicatorRight.addEventListener('click', () => {
                navLinks.scrollBy({ left: 200, behavior: 'smooth' }); // å³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            });
        }
    </script>
</body>
</html>
