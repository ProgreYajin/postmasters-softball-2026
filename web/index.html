<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026å¹´åº¦åƒè‘‰çœŒéƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            background: #003366;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header-top {
            background: #002244;
            padding: 12px 0;
            font-size: 0.85em;
        }
        
        .header-top-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-logo {
            cursor: pointer;
            transition: opacity 0.3s;
        }
        
        .header-logo:hover {
            opacity: 0.8;
        }
        
        .header-logo img {
            height: 35px;
            width: auto;
            display: block;
        }
        
        .header-info {
            color: #aaa;
            font-size: 0.9em;
        }
        
        .header-main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px 20px;
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding-bottom: 5px;
        }
        
        .nav-links::-webkit-scrollbar {
            display: none;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-size: 0.95em;
            transition: opacity 0.3s;
            white-space: nowrap;
        }
        
        .nav-links a:hover {
            opacity: 0.7;
        }
        
        /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¨ãƒªã‚¢ */
        .hero {
            background: linear-gradient(to right, #003366, #005599);
            color: white;
            padding: 60px 20px;
            text-align: center;
        }
        
        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .hero h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        .hero-info {
            font-size: 1.2em;
            opacity: 0.9;
            margin-top: 10px;
        }
        
        .hero-date {
            font-size: 1.3em;
            margin-bottom: 8px;
        }
        
        .hero-venue {
            font-size: 1.1em;
        }
        
        /* å†™çœŸã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ */
        .photo-slider-section {
            background: white;
            padding: 0;
        }
        
        .slider-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            height: 400px;
            overflow: hidden;
        }
        
        .slider-track {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }
        
        .slide {
            min-width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .slide.placeholder {
            background: linear-gradient(135deg, #003366 0%, #005599 100%);
            color: white;
            font-size: 4em;
        }
        
        .slider-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            padding: 30px;
            color: white;
        }
        
        .slider-title {
            font-size: 1.3em;
            margin-bottom: 5px;
        }
        
        .slider-subtitle {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        .slider-dots {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .dot.active {
            background: white;
            width: 30px;
            border-radius: 5px;
        }
        
        /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .section-title {
            font-size: 1.8em;
            font-weight: 300;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #003366;
            letter-spacing: 1px;
        }
        
        /* ã‚¿ãƒ– */
        .tabs {
            display: flex;
            gap: 2px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            padding: 15px 30px;
            background: #f5f5f5;
            border: none;
            font-size: 1em;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
            border-top: 3px solid transparent;
            flex: 1;
        }
        
        .tab.active {
            background: white;
            color: #003366;
            border-top-color: #003366;
            font-weight: bold;
        }
        
        .tab:hover:not(.active) {
            background: #fff;
        }
        
        .court-content {
            display: none;
        }
        
        .court-content.active {
            display: block;
        }
        
        /* è©¦åˆã‚«ãƒ¼ãƒ‰ */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .game-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .game-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .game-header {
            background: #f8f8f8;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .game-number {
            font-weight: bold;
            color: #003366;
        }
        
        .status {
            padding: 4px 12px;
            border-radius: 3px;
            font-size: 0.85em;
            font-weight: bold;
        }
        
        .status.playing {
            background: #d32f2f;
            color: white;
        }
        
        .status.waiting {
            background: #757575;
            color: white;
        }
        
        .status.finished {
            background: #388e3c;
            color: white;
        }
        
        .matchup {
            padding: 20px 15px;
        }
        
        .matchup-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }
        
        .team-name {
            font-size: 1.1em;
            font-weight: 500;
            flex: 1;
        }
        
        .team-name.home {
            text-align: left;
        }
        
        .team-name.away {
            text-align: right;
        }
        
        .score-separator {
            font-size: 1.5em;
            font-weight: bold;
            color: #003366;
            padding: 0 10px;
        }
        
        .team-score {
            font-size: 1.8em;
            font-weight: bold;
            color: #003366;
            min-width: 40px;
            text-align: center;
        }
        
        .inning-info {
            text-align: center;
            padding: 8px;
            background: #f8f8f8;
            font-size: 0.9em;
            color: #666;
        }
        
        /* ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯ */
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .link-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 30px 20px;
            text-align: center;
            text-decoration: none;
            color: #333;
            transition: all 0.3s;
        }
        
        .link-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
            border-color: #003366;
        }
        
        .link-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .link-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .link-description {
            font-size: 0.9em;
            color: #666;
        }
        
        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            background: #002244;
            color: white;
            padding: 20px;
            margin-top: 60px;
            text-align: center;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .copyright {
            font-size: 0.85em;
            opacity: 0.6;
        }
        
        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f0f0f0;
            border-top: 4px solid #003366;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .scroll-indicator {
            display: none;
        }
        
        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .header-main {
                position: relative;
                overflow: hidden;
            }
            
            .nav-links {
                width: 100%;
                justify-content: flex-start;
                padding-bottom: 5px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                flex-wrap: nowrap;
            }
            
            .nav-links a {
                flex-shrink: 0;
            }
            
            /* ğŸ’¡ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’2ã¤ã«åˆ†å‰²ã—ã€å·¦å³ã«å›ºå®š */
            .scroll-indicator {
                display: none; /* JSã§è¡¨ç¤ºã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã€åˆæœŸã¯éè¡¨ç¤º */
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                height: 47px;
                width: 30px;
                align-items: center;
                justify-content: center;
                font-size: 1.2em;
                color: white;
                background-color: #003366;
                cursor: pointer;
                z-index: 10;
            }
            .scroll-indicator.left {
                left: 0;
                right: auto;
            }
            .scroll-indicator.right {
                right: 0;
                left: auto;
            }
            
            .hero h1 {
                font-size: 1.8em;
            }
            
            .slider-container {
                height: 250px;
            }
            
            .tabs {
                overflow-x: auto;
            }
            
            .tab {
                padding: 12px 20px;
                white-space: nowrap;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-top">
            <div class="header-top-content">
                <a href="#" onclick="return false;" class="header-logo">
                    <img src="https://drive.google.com/thumbnail?id=1i01jLSCnme9KdDuBwL8MufLNGdeo_d0x" alt="å…¨å›½éƒµä¾¿å±€é•·ä¼š">
                </a>
                <div class="header-info">
                    2026å¹´éƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š | 2026.6.6
                </div>
            </div>
        </div>
        <div class="header-main">
            <nav class="nav-links" id="navLinks">
                <a href="#" onclick="openPage('scoreboard.html'); return false;">è©¦åˆé€Ÿå ± / è©¦åˆçµæœ</a>
                <a href="#" onclick="openPage('schedule.html'); return false;">å¤§ä¼šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a>
                <a href="#" onclick="openPage('tournament.html'); return false;">ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨</a>
                <a href="#" onclick="openPage('teams.html'); return false;">ãƒãƒ¼ãƒ ãƒ»é¸æ‰‹ä¸€è¦§</a>
                <a href="#" onclick="openPage('venue.html'); return false;">ä¼šå ´æ¡ˆå†…ãƒ»ã‚¢ã‚¯ã‚»ã‚¹</a>
                <a href="#" onclick="openPage('rules.html'); return false;">å¤§ä¼šãƒ«ãƒ¼ãƒ«ãƒ»è¦ç´„</a>
                <a href="#" onclick="openPage('history.html'); return false;">å„ªå‹è¨˜éŒ²ãƒ»æ­´å²</a>
            </nav>
            <div class="scroll-indicator left" id="scrollIndicatorLeft">â—€ï¸</div>
            <div class="scroll-indicator right" id="scrollIndicatorRight">â–¶ï¸</div>
        </div>
    </header>
    
    <div class="hero">
        <div class="hero-content">
            <h1>2026å¹´åƒè‘‰çœŒéƒµä¾¿å±€é•·ã‚½ãƒ•ãƒˆãƒœãƒ¼ãƒ«å¤§ä¼š</h1>
            <div class="hero-info">
                <div class="hero-date">2026å¹´6æœˆ6æ—¥ï¼ˆåœŸï¼‰é–‹å‚¬</div>
                <div class="hero-venue">ğŸ“ ä½å€‰å¸‚å²©åé‹å‹•å…¬åœ’</div>
            </div>
        </div>
    </div>
    
    <div class="photo-slider-section">
        <div class="slider-container">
            <div class="slider-track" id="sliderTrack">
                <div class="slide placeholder">
                    ğŸ“·
                    <div class="slider-overlay">
                        <div class="slider-title">ãƒ•ã‚©ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼</div>
                        <div class="slider-subtitle">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å†™çœŸã‚’è¦‹ã‚‹</div>
                    </div>
                </div>
            </div>
            <div class="slider-dots" id="sliderDots"></div>
        </div>
    </div>
    
    <div class="container">
        <h2 class="section-title" id="scores">è©¦åˆé€Ÿå ±</h2>
        
        <div class="tabs" id="tabs"></div>
        
        <div id="content">
            <div class="loading">
                <div class="loading-spinner"></div>
                <div>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</div>
            </div>
        </div>
        
        <h2 class="section-title" style="margin-top: 60px;">å¤§ä¼šæƒ…å ±</h2>
        
        <div class="quick-links">
            <a href="#" onclick="openPage('scoreboard.html'); return false;" class="link-card">
                <div class="link-icon">âš¡</div>
                <div class="link-title">è©¦åˆé€Ÿå ± / è©¦åˆçµæœ</div>
                <div class="link-description">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ã‚³ã‚¢</div>
            </a>
            
            <a href="#" onclick="openPage('schedule.html'); return false;" class="link-card">
                <div class="link-icon">ğŸ“…</div>
                <div class="link-title">å¤§ä¼šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</div>
                <div class="link-description">å½“æ—¥ã®ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«</div>
            </a>
            
            <a href="#" onclick="openPage('tournament.html'); return false;" class="link-card">
                <div class="link-icon">ğŸ†</div>
                <div class="link-title">ãƒˆãƒ¼ãƒŠãƒ¡ãƒ³ãƒˆè¡¨</div>
                <div class="link-description">å¯¾æˆ¦çµ„ã¿åˆã‚ã›</div>
            </a>
            
            <a href="#" onclick="openPage('teams.html'); return false;" class="link-card">
                <div class="link-icon">ğŸ‘¥</div>
                <div class="link-title">ãƒãƒ¼ãƒ ãƒ»é¸æ‰‹ä¸€è¦§</div>
                <div class="link-description">å‚åŠ ãƒãƒ¼ãƒ ç´¹ä»‹</div>
            </a>
            
            <a href="#" onclick="openPage('venue.html'); return false;" class="link-card">
                <div class="link-icon">ğŸ“</div>
                <div class="link-title">ä¼šå ´æ¡ˆå†…ãƒ»ã‚¢ã‚¯ã‚»ã‚¹</div>
                <div class="link-description">ã‚¢ã‚¯ã‚»ã‚¹ãƒ»æ–½è¨­æƒ…å ±</div>
            </a>
            
            <a href="#" onclick="openPage('rules.html'); return false;" class="link-card">
                <div class="link-icon">ğŸ“‹</div>
                <div class="link-title">å¤§ä¼šãƒ«ãƒ¼ãƒ«ãƒ»è¦ç´„</div>
                <div class="link-description">ç«¶æŠ€è¦å‰‡ãƒ»æ³¨æ„äº‹é …</div>
            </a>
            
            <a href="#" onclick="openPage('history.html'); return false;" class="link-card">
                <div class="link-icon">ğŸ¥‡</div>
                <div class="link-title">å„ªå‹è¨˜éŒ²ãƒ»æ­´å²</div>
                <div class="link-description">æ­´ä»£å„ªå‹ãƒãƒ¼ãƒ </div>
            </a>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="copyright">
                Â© 2025 Softball Tournament. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        // æ—¥æ™‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
        function formatTimestamp(timestamp) {
            if (!timestamp) return '';
            
            if (timestamp.includes('T') && timestamp.includes('Z')) {
                const date = new Date(timestamp);
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const hours = String(date.getHours()).padStart(2, '0');
                const minutes = String(date.getMinutes()).padStart(2, '0');
                return `${month}/${day} ${hours}:${minutes}`;
            }
            
            if (timestamp.match(/^\d{2}\/\d{2}\s+\d{2}:\d{2}$/)) {
                return timestamp;
            }
            
            return timestamp;
        }
        
        const urlParams = new URLSearchParams(window.location.search);
        const STAFF_API_URL = urlParams.get('staff_api') || localStorage.getItem('STAFF_BOT_API_URL') || '';
        const AUDIENCE_API_URL = urlParams.get('audience_api') || localStorage.getItem('AUDIENCE_BOT_API_URL') || '';
        
        if (urlParams.get('staff_api')) {
            localStorage.setItem('STAFF_BOT_API_URL', urlParams.get('staff_api'));
        }
        if (urlParams.get('audience_api')) {
            localStorage.setItem('AUDIENCE_BOT_API_URL', urlParams.get('audience_api'));
        }
        if (urlParams.get('api')) {
            localStorage.setItem('STAFF_BOT_API_URL', urlParams.get('api'));
        }
        
        let currentCourt = null;
        let gamesData = null;
        let currentSlide = 0;
        let sliderInterval = null;
        
        function initSlider(photoCount = 1) {
            const dots = document.getElementById('sliderDots');
            dots.innerHTML = '';
            
            for (let i = 0; i < photoCount; i++) {
                const dot = document.createElement('div');
                dot.className = `dot ${i === 0 ? 'active' : ''}`;
                dot.onclick = () => goToSlide(i);
                dots.appendChild(dot);
            }
            
            if (sliderInterval) clearInterval(sliderInterval);
            sliderInterval = setInterval(nextSlide, 5000);
        }
        
        function nextSlide() {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            
            currentSlide = (currentSlide + 1) % slides.length;
            
            document.getElementById('sliderTrack').style.transform = 
                `translateX(-${currentSlide * 100}%)`;
            
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }
        
        function goToSlide(index) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.dot');
            
            currentSlide = index;
            
            document.getElementById('sliderTrack').style.transform = 
                `translateX(-${currentSlide * 100}%)`;
            
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSlide);
            });
        }
        
        async function fetchGalleryPhotos() {
            if (!AUDIENCE_API_URL) return;
            
            try {
                const timestamp = new Date().getTime();
                const response = await fetch(`${AUDIENCE_API_URL}?t=${timestamp}`, {
                    method: 'GET',
                    mode: 'cors',
                    cache: 'no-cache'
                });
                
                if (!response.ok) return;
                
                const data = await response.json();
                
                if (data.photos && data.photos.length > 0) {
                    updateGallerySlider(data.photos);
                }
            } catch (error) {
                console.error('ã‚®ãƒ£ãƒ©ãƒªãƒ¼å†™çœŸå–å¾—ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        function updateGallerySlider(photos) {
            const sliderTrack = document.getElementById('sliderTrack');
            const photosToShow = photos.slice(0, 5);
            
            sliderTrack.innerHTML = '';
            
            photosToShow.forEach(photo => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                slide.style.cursor = 'pointer';
                slide.onclick = openGallery;
                
                const img = document.createElement('img');
                img.src = photo.thumbnail;
                img.alt = 'å¤§ä¼šå†™çœŸ';
                img.loading = 'eager';
                
                img.onerror = function() {
                    slide.innerHTML = 'ğŸ“·';
                    slide.classList.add('placeholder');
                };
                
                slide.appendChild(img);
                
                const overlay = document.createElement('div');
                overlay.className = 'slider-overlay';
                
                const timestamp = formatTimestamp(photo.timestamp);
                
                overlay.innerHTML = `
                    <div class="slider-title">å¤§ä¼šå†™çœŸã‚®ãƒ£ãƒ©ãƒªãƒ¼</div>
                    <div class="slider-subtitle">${timestamp} æŠ•ç¨¿</div>
                `;
                slide.appendChild(overlay);
                
                sliderTrack.appendChild(slide);
            });
            
            initSlider(photosToShow.length);
        }
        
        function openGallery() {
            const params = new URLSearchParams();
            if (AUDIENCE_API_URL) params.set('api', AUDIENCE_API_URL);
            window.location.href = `gallery.html?${params.toString()}`;
        }
        
        function openPage(page) {
            const params = new URLSearchParams();
            if (STAFF_API_URL) params.set('api', STAFF_API_URL);
            window.location.href = `${page}?${params.toString()}`;
        }
        
        function openScoresPage() {
            const params = new URLSearchParams();
            if (STAFF_API_URL) params.set('api', STAFF_API_URL);
            
            const fileName = 'scoreboard.html';
            window.location.href = `${fileName}?${params.toString()}`;
        }
        
        async function fetchScores() {
            if (!STAFF_API_URL) {
                document.getElementById('content').innerHTML = `
                    <div class="loading">
                        <div>âš ï¸ API URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</div>
                    </div>
                `;
                return;
            }
            
            try {
                const timestamp = new Date().getTime();
                const response = await fetch(`${STAFF_API_URL}?t=${timestamp}`, {
                    method: 'GET',
                    mode: 'cors',
                    cache: 'no-cache'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                gamesData = data;
                displayGames(data);
            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
                document.getElementById('content').innerHTML = `
                    <div class="loading">
                        <div>ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</div>
                    </div>
                `;
            }
        }
        
        function displayGames(data) {
            if (!data.games || data.games.length === 0) {
                document.getElementById('content').innerHTML = `
                    <div class="loading">
                        <div>ã¾ã è©¦åˆãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>
                    </div>
                `;
                return;
            }
            
            const courtGroups = {};
            data.games.forEach(game => {
                if (!courtGroups[game.court]) {
                    courtGroups[game.court] = {};
                }
                if (!courtGroups[game.court][game.gameNum]) {
                    courtGroups[game.court][game.gameNum] = [];
                }
                courtGroups[game.court][game.gameNum].push(game);
            });
            
            const courts = Object.keys(courtGroups).sort();
            
            if (!currentCourt || !courts.includes(currentCourt)) {
                currentCourt = courts[0];
            }
            
            let tabsHtml = '';
            courts.forEach(court => {
                const activeClass = court === currentCourt ? 'active' : '';
                tabsHtml += `<button class="tab ${activeClass}" onclick="switchCourt('${court}')">${court}ã‚³ãƒ¼ãƒˆ</button>`;
            });
            document.getElementById('tabs').innerHTML = tabsHtml;
            
            let contentHtml = '';
            courts.forEach(court => {
                const activeClass = court === currentCourt ? 'active' : '';
                contentHtml += `<div class="court-content ${activeClass}" id="court-${court}">`;
                contentHtml += '<div class="games-grid">';
                
                const games = courtGroups[court];
                const gameNums = Object.keys(games).sort((a, b) => a - b);
                
                let hasPlayingGames = false;
                
                gameNums.forEach(gameNum => {
                    const teams = games[gameNum];
                    const status = teams[0].status || 'å¾…æ©Ÿ';
                    
                    // ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã§ã¯è©¦åˆä¸­ã®è©¦åˆã®ã¿è¡¨ç¤º
                    if (status !== 'è©¦åˆä¸­') {
                        return;
                    }
                    
                    hasPlayingGames = true;
                    
                    let statusClass = 'playing';
                    
                    const homeTeam = teams[0];
                    const awayTeam = teams[1];
                    
                    const currentInning = getCurrentInning(homeTeam, awayTeam);
                    
                    contentHtml += `
                        <div class="game-card" onclick="openScoreboard('${court}', ${gameNum})">
                            <div class="game-header">
                                <span class="game-number">ç¬¬${gameNum}è©¦åˆ</span>
                                <span class="status ${statusClass}">${status}</span>
                            </div>
                            <div class="matchup">
                                <div class="matchup-line">
                                    <span class="team-name home">${homeTeam.team}</span>
                                    <span class="team-score">${homeTeam.total || 0}</span>
                                    <span class="score-separator">-</span>
                                    <span class="team-score">${awayTeam.total || 0}</span>
                                    <span class="team-name away">${awayTeam.team}</span>
                                </div>
                            </div>
                            ${currentInning ? `<div class="inning-info">${currentInning}</div>` : ''}
                        </div>
                    `;
                });
                
                if (!hasPlayingGames) {
                    contentHtml += '<div style="padding: 40px; text-align: center; color: #666;">ç¾åœ¨è©¦åˆä¸­ã®è©¦åˆã¯ã‚ã‚Šã¾ã›ã‚“</div>';
                }
                
                contentHtml += '</div></div>';
            });
            
            document.getElementById('content').innerHTML = contentHtml;
        }
        
        function getCurrentInning(homeTeam, awayTeam) {
            if (!homeTeam.innings || homeTeam.innings.length === 0) {
                return null;
            }
            
            for (let i = 0; i < homeTeam.innings.length; i++) {
                if (awayTeam.innings[i] !== null && awayTeam.innings[i] !== undefined && awayTeam.innings[i] !== '' &&
                    (homeTeam.innings[i] === null || homeTeam.innings[i] === undefined || homeTeam.innings[i] === '')) {
                    return `${i + 1}å›è¡¨`;
                }
                if ((homeTeam.innings[i] === null || homeTeam.innings[i] === undefined || homeTeam.innings[i] === '') &&
                    (awayTeam.innings[i] === null || awayTeam.innings[i] === undefined || awayTeam.innings[i] === '')) {
                    if (i > 0) {
                        return `${i}å›çµ‚äº†`;
                    }
                    return null;
                }
            }
            
            return `${homeTeam.innings.length}å›çµ‚äº†`;
        }
        
        function switchCourt(court) {
            currentCourt = court;
            displayGames(gamesData);
        }
        
        function openScoreboard(court, gameNum) {
            const params = new URLSearchParams();
            if (STAFF_API_URL) params.set('api', STAFF_API_URL);
            params.set('court', court);
            params.set('game', gameNum);
            
            window.location.href = `scoreboard.html?${params.toString()}`;
        }
        
        fetchScores();
        fetchGalleryPhotos();
        setInterval(fetchScores, 60000);
        setInterval(fetchGalleryPhotos, 60000);
        initSlider(1);
        
        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®åˆ¶å¾¡
        const navLinks = document.getElementById('navLinks');
        // ğŸ’¡ å·¦å³ãã‚Œãã‚Œã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’å–å¾—ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´
        const scrollIndicatorLeft = document.getElementById('scrollIndicatorLeft');
        const scrollIndicatorRight = document.getElementById('scrollIndicatorRight');
        
        function updateScrollIndicator() {
            // ğŸ’¡ IDã®å¤‰æ›´ã«å¯¾å¿œ
            if (!navLinks || !scrollIndicatorLeft || !scrollIndicatorRight) return;

            const maxScroll = navLinks.scrollWidth - navLinks.clientWidth;
            const currentScroll = navLinks.scrollLeft;
            const threshold = 5; // è¨±å®¹èª¤å·®

            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒå¿…è¦ãªã„å ´åˆã¯ä¸¡æ–¹éè¡¨ç¤º
            if (maxScroll <= threshold) {
                scrollIndicatorLeft.style.display = 'none';
                scrollIndicatorRight.style.display = 'none';
                return;
            }

            // 1. å·¦çŸ¢å°ï¼ˆâ—€ï¸ï¼‰ã®åˆ¶å¾¡: å·¦ã«æˆ»ã‚Œã‚‹ãªã‚‰è¡¨ç¤º (å·¦ç«¯ã‹ã‚‰é›¢ã‚Œã¦ã„ã‚‹)
            if (currentScroll > threshold) {
                scrollIndicatorLeft.style.display = 'flex';
            } else {
                scrollIndicatorLeft.style.display = 'none';
            }

            // 2. å³çŸ¢å°ï¼ˆâ–¶ï¸ï¼‰ã®åˆ¶å¾¡: å³ã«é€²ã‚ã‚‹ãªã‚‰è¡¨ç¤º (å³ç«¯ã«åˆ°é”ã—ã¦ã„ãªã„)
            if (currentScroll < maxScroll - threshold) {
                scrollIndicatorRight.style.display = 'flex';
            } else {
                scrollIndicatorRight.style.display = 'none';
            }
        }
        
        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›£è¦–
        if (navLinks) {
            navLinks.addEventListener('scroll', updateScrollIndicator);
            window.addEventListener('resize', updateScrollIndicator);
            
            // åˆæœŸè¡¨ç¤º
            updateScrollIndicator();
        }
        
        // ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚¯ãƒªãƒƒã‚¯ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        if (scrollIndicatorLeft) {
            scrollIndicatorLeft.addEventListener('click', () => {
                const scrollAmount = 200;
                navLinks.scrollBy({ left: -scrollAmount, behavior: 'smooth' }); // å·¦ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            });
        }
        
        if (scrollIndicatorRight) {
            scrollIndicatorRight.addEventListener('click', () => {
                const scrollAmount = 200;
                navLinks.scrollBy({ left: scrollAmount, behavior: 'smooth' }); // å³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            });
        }
    </script>
</body>
</html>
